<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Order Form - M&M Agro Farms</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f5fff5;
      padding: 20px;
    }

    form {
      background: #eaffea;
      padding: 20px;
      border-radius: 12px;
      max-width: 400px;
      margin: auto;
      box-shadow: 0 0 10px #ccc;
    }

    label {
      display: block;
      margin-bottom: 6px;
      font-weight: bold;
    }

    input {
      width: 100%;
      padding: 8px;
      margin-bottom: 16px;
      border: 1px solid #ccc;
      border-radius: 6px;
    }

    button {
      background-color: #28a745;
      color: white;
      padding: 10px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      width: 100%;
    }

    #message {
      margin-top: 20px;
      font-weight: bold;
      text-align: center;
    }
  </style>
</head>
<body>

  <form id="orderForm">
    <h2 style="text-align:center;">üõí Place Your Order</h2>
    <label for="name">Name:</label>
    <input type="text" name="name" required>

    <label for="phone">Phone Number:</label>
    <input type="text" name="phone" required>

    <label for="quantity">Quantity (in Kg):</label>
    <input type="number" name="quantity" required min="0.5" step="0.5">

    <button type="submit">Submit Order</button>
  </form>

  <div id="message"></div>

  <script>
    function isOrderTimeValid() {
      const now = new Date();
      const currentDay = now.getDay(); // Sunday = 0, Saturday = 6
      const currentHour = now.getHours();
      const currentMinutes = now.getMinutes();

      if (currentDay === 6 && (currentHour > 21 || (currentHour === 21 && currentMinutes > 0))) {
        return false; // Saturday after 9 PM
      }

      if (currentDay === 0 && currentHour < 8) {
        return false; // Sunday before 8 AM
      }

      return true; // All other times within valid window
    }

    document.getElementById("orderForm").addEventListener("submit", function(e) {
      e.preventDefault();

      if (!isOrderTimeValid()) {
        document.getElementById("message").innerText = "‚ùå Order rejected: We accept orders only from Sunday 8 AM to Saturday 9 PM.";
        return;
      }
      const scriptURL = "https://script.google.com/macros/s/AKfycbwwBksXDH30iIfX-zsxsgswuJZ-fabj_GU_j84t4t4R1ZVJW_UyukoBTwzgXIlJDJN6JQ/exec";

      //const scriptURL = "https://script.google.com/macros/s/YOUR_SCRIPT_ID_HERE/exec"; // Replace this with your actual script URL
      const form = document.forms["orderForm"];
      const formData = new FormData(form);

      fetch(scriptURL, { method: 'POST', body: formData })
        .then(response => {
          document.getElementById("message").innerText = "‚úÖ Order submitted successfully!";
          form.reset();
        })
        .catch(error => {
          document.getElementById("message").innerText = "‚ùå Submission failed. Please try again.";
          console.error('Error!', error.message);
        });
    });
  </script>

</body>
</html>
