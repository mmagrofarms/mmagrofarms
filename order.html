<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>M&M Agro Farms – Order</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background-color: #f5f5f5;
      text-align: center;
    }
.blink-sunday {
  display: inline-block;
  padding: 8px 12px;
  border-radius: 4px;
  animation: blink-bg 1s steps(1, start) infinite,
             blink-color 1s steps(1, start) infinite;
}

@keyframes blink-bg {
  0%, 50%   { background-color: #FFEB3B; /* light yellow */ }
  51%, 100% { background-color: #F8BBD0; /* light pink */ }
}

@keyframes blink-color {
  0%, 50%   { color: #2e7d32; } /* dark green */
  51%, 100% { color: #880E4F; } /* deep rose */
}

    h2 {
      color: #2e7d32;
      font-size: 36px;
      margin-bottom: 10px;
    }
    h3 {
      color: #FFB6C1; /* light pink tagline */
      margin-bottom: 20px;
    }
    .order-form {
      background-color: #e0f2f1;
      padding: 25px;
      border-radius: 12px;
      box-shadow: 0 0 16px rgba(0, 0, 0, 0.1);
      max-width: 600px;
      margin: 0 auto;
      text-align: left;
    }
    label { display: block; margin-top: 15px; font-weight: bold; }
    input, textarea {
      width: 100%; padding: 10px; margin-top: 8px;
      border: 1px solid #ccc; border-radius: 6px;
    }
    #totalAmount {
      font-size: 20px; margin-top: 20px;
      color: #d32f2f; font-weight: bold;
    }
    button {
      margin-top: 25px; background-color: #388e3c;
      color: #000; padding: 12px; border: none;
      border-radius: 8px; cursor: pointer; font-size: 18px;
    }
    button:hover { background-color: #2e7d32; }
  </style>
</head>
<body>
  <h2>🌿 M&M Agro Farms 🌿</h2>
  <h3 class="blink-sunday">Delivery Available Only on Sundays</h3>

  <div class="order-form">
    <form id="orderForm">
      <label for="name">👤 Name:</label>
      <input type="text" id="name" name="name" required />

      <label for="mobile">📞 Mobile:</label>
      <input type="tel" id="mobile" name="mobile" required />

      <label for="mutton">📦 Mutton (₹850/kg):</label>
      <input type="number" id="mutton" name="mutton" min="0" value="0" step="0.001" />

      <label for="chicken">📦 Desi Chicken (₹550/kg):</label>
      <input type="number" id="chicken" name="chicken" min="0" value="0" step="0.001" />

      <label for="eggs">🥚 Desi Eggs (₹13 each):</label>
      <input type="number" id="eggs" name="eggs" min="0" value="0" step="1" />

      <label for="address">📍 Address:</label>
      <textarea id="address" name="address" required></textarea>

      <label for="delivery">🗓️ Delivery Date &amp; Time (must be Sunday):</label>
      <input type="datetime-local" id="delivery" name="delivery" required />

      <label for="notes">📝 Notes (Optional):</label>
      <textarea id="notes" name="notes"></textarea>

      <div id="totalAmount">💰 Total: ₹0.00</div>
      <button type="submit">Submit Order</button>
    </form>
  </div>

  <script>
    const prices = { mutton: 850, chicken: 550, eggs: 13 };
    const muttonEl = document.getElementById("mutton");
    const chickenEl = document.getElementById("chicken");
    const eggsEl = document.getElementById("eggs");
    const totalEl = document.getElementById("totalAmount");

    function calculateTotal() {
      const total =
        (parseFloat(muttonEl.value || 0) * prices.mutton) +
        (parseFloat(chickenEl.value || 0) * prices.chicken) +
        (parseFloat(eggsEl.value || 0) * prices.eggs);
      totalEl.innerText = `💰 Total: ₹${total.toFixed(2)}`;
      return total;
    }

    [muttonEl, chickenEl, eggsEl].forEach(i => i.addEventListener("input", calculateTotal));

    function getNextSunday() {
      const today = new Date();
      const diff = (7 - today.getDay()) % 7 || 7;
      const next = new Date(today.getFullYear(), today.getMonth(), today.getDate() + diff);
      next.setHours(0,0,0,0);
      return next;
    }

    document.getElementById("orderForm").addEventListener("submit", function(e) {
      e.preventDefault();
      const deliveryInput = document.getElementById("delivery").value;
      const deliveryDate = deliveryInput ? new Date(deliveryInput) : null;
      const nextSunday = getNextSunday();

      if (!deliveryDate || deliveryDate.getDay() !== 0 ||
          deliveryDate.toDateString() !== nextSunday.toDateString()) {
        alert(`🚫 Sorry, delivery is available only on the upcoming Sunday (${ nextSunday.toDateString() }).`);
        return;
      }

      const name = document.getElementById("name").value;
      const mobile = document.getElementById("mobile").value;
      const mQty = parseFloat(muttonEl.value || 0);
      const cQty = parseFloat(chickenEl.value || 0);
      const eQty = parseFloat(eggsEl.value || 0);
      const address = document.getElementById("address").value;
      const notes = document.getElementById("notes").value;
      const total = calculateTotal();
      const orderId = `MM${Math.floor(100000 + Math.random() * 900000)}`;

      const message =
        "🌿 M&M Agro Farms 🌿\n" +
        "Your Order Details:\n" +
        `🆔 Order ID: ${orderId}\n` +
        `👤 Name: ${name}\n` +
        `📞 Mobile: ${mobile}\n` +
        `📦 Qty: ${mQty} kg Mutton, ${cQty} kg Chicken, ${eQty} Eggs\n` +
        `💰 Total: ₹${total.toFixed(2)}\n` +
        `📍 Address: ${address}\n` +
        `🗓️ Delivery: ${deliveryDate}\n` +
        `📝 Notes: ${notes || "-"}\n` +
        `✅ Thank you for choosing M&M Agro Farms!`;

      const encoded = encodeURIComponent(message);
      window.open(`https://wa.me/91${mobile}?text=${encoded}`, '_blank');
      setTimeout(() => window.open(`https://wa.me/918688014021?text=${encoded}`, '_blank'), 500);
      alert("✅ Order submitted! Redirecting to WhatsApp.");
      this.reset();
      calculateTotal();
    });
  </script>
</body>
</html>
